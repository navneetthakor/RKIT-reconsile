<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Whiteboard</title>
    <link rel="stylesheet" href="../css/main.css">
</head>
<body>
    <canvas id="myCanvas">Whiteboard not supported</canvas>
    <button id="btn">Clear</button>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script >
        $('document').ready(function() {
            const canvas = $("#myCanvas");
            const context = canvas[0].getContext('2d');
            
            // setting height of canvas
            canvas.attr('height', window.innerHeight);
            canvas.attr('width', window.innerWidth);

            // variables to manage states 
            let isDrawing = false;
            let x = 0;
            let y = 0;

            // utility functions 
            function getCordinates(e){
                x = e.clientX;
                y = e.clientY;
            }

            // functions regarding major events 
            function mouseDown(e){
                getCordinates(e);
                isDrawing = true;
            }

            function mouseUp(e){
                isDrawing = false;
            }
            
            function mouseMove(e){
                if(isDrawing){
                    context.beginPath();
                    context.moveTo(x,y);
                    getCordinates(e);
                    context.lineTo(x,y);
                    context.strokeStyle = "red";
                    context.stroke();
                    context.closePath();
                }
            }


            // setting event listeners 
            canvas.mousedown(mouseDown);
            canvas.mouseup(mouseUp);
            canvas.mousemove(mouseMove);

            // logic related to buttons 
            const clearBtn = $('#btn');
            clearBtn.click(function(){
                context.clearRect(0,0,window.innerWidth,window.innerHeight)
            })
        })
    </script>
</body>
</html>